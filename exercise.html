
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The Publication Exercise for the course &#8212; ReproNim OHBM 2022 Educational Course</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script async="async" kind="hypothesis" src="https://hypothes.is/embed.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Code of Conduct" href="CoC.html" />
    <link rel="prev" title="Course materials" href="materials.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/repronim_logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">ReproNim OHBM 2022 Educational Course</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="index.html">
   Welcome!
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="dei.html">
   Diversity, Equity and Inclusion
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="overview.html">
   course overview
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="setup.html">
   Setup for the workshop
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="outline.html">
   Outline
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="materials.html">
   Course materials
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   The Publication Exercise for the course
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="CoC.html">
   Code of Conduct
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/exercise.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/ReproNim/OHBMEducation-2022"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/ReproNim/OHBMEducation-2022/issues/new?title=Issue%20on%20page%20%2Fexercise.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/ReproNim/OHBMEducation-2022/edit/main/course/exercise.md"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   The Publication Exercise for the course
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#prerequsites">
   Prerequsites
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#jupyterhub">
   JupyterHub
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#meet-your-reprohub">
     Meet your ReproHub
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-steps">
   The Steps
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#create-a-github-repo-for-your-publication">
     Create a GitHub Repo for your Publication
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#pre-registration">
     Pre-Registration
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#collect-data">
     Collect Data
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#data-subset">
       Data Subset
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h4 nav-item toc-entry">
        <a class="reference internal nav-link" href="#let-s-do-it">
         Let’s Do It!
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#setting-the-analysis-environment-commands">
     Setting the Analysis Environment Commands
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#data-analysis">
   Data Analysis
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-hypotheses">
     The Hypotheses
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-container">
     The Container
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#standards">
   Standards
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#imaging-data">
     Imaging Data
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#standardized-representation-of-the-results">
     Standardized Representation of the Results
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#querying-the-results">
   Querying the results
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#linear-regression">
     Linear Regression
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#publishing-the-results-to-the-reprolake">
   Publishing the results to the ReproLake
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#publish-the-complete-package">
   Publish the Complete Package
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#write-your-paper">
   Write Your Paper
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>The Publication Exercise for the course</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   The Publication Exercise for the course
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#prerequsites">
   Prerequsites
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#jupyterhub">
   JupyterHub
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#meet-your-reprohub">
     Meet your ReproHub
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-steps">
   The Steps
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#create-a-github-repo-for-your-publication">
     Create a GitHub Repo for your Publication
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#pre-registration">
     Pre-Registration
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#collect-data">
     Collect Data
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#data-subset">
       Data Subset
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h4 nav-item toc-entry">
        <a class="reference internal nav-link" href="#let-s-do-it">
         Let’s Do It!
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#setting-the-analysis-environment-commands">
     Setting the Analysis Environment Commands
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#data-analysis">
   Data Analysis
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-hypotheses">
     The Hypotheses
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-container">
     The Container
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#standards">
   Standards
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#imaging-data">
     Imaging Data
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#standardized-representation-of-the-results">
     Standardized Representation of the Results
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#querying-the-results">
   Querying the results
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#linear-regression">
     Linear Regression
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#publishing-the-results-to-the-reprolake">
   Publishing the results to the ReproLake
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#publish-the-complete-package">
   Publish the Complete Package
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#write-your-paper">
   Write Your Paper
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="section" id="the-publication-exercise-for-the-course">
<h1>The Publication Exercise for the course<a class="headerlink" href="#the-publication-exercise-for-the-course" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="prerequsites">
<h1>Prerequsites<a class="headerlink" href="#prerequsites" title="Permalink to this headline">¶</a></h1>
<p>Don’t have an account on github ? please create one on <a class="reference external" href="https://github.com">GitHub</a>
You will need a <strong>token</strong> - please navigate to your account (top right) and then go to “developer settings” and “personal access token” create a token - click on “repo” and take the token to do things like <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span></code> (see below).</p>
<p>For the exercises below it will also be important to have a ‘fork’ of the “ReproNim/OHBMEducation-2022” GitHub repository. to do this:</p>
<ol class="simple">
<li><p>Navigate your browser to <a class="reference external" href="https://github.com/ReproNim/OHBMEducation-2022">https://github.com/ReproNim/OHBMEducation-2022</a></p></li>
<li><p>Select ‘fork’ in the row of operations at the top of the window</p></li>
<li><p>Select ‘Create Fork’</p></li>
</ol>
<p>You now have you own copy of the couse materials to use in the future.</p>
</div>
<div class="section" id="jupyterhub">
<h1>JupyterHub<a class="headerlink" href="#jupyterhub" title="Permalink to this headline">¶</a></h1>
<p>JupyterHub provides the computational platform we will use. We can all use a common platform with all our needed software prerequisites
and environment pre-set. This eliminates the hassle of making all this work on everyone’s local computers. However, the downside is that you
may not be able to replicate this example ‘at home’ unless/until you solve the software prerequisites on your own computational platform.
That’s OK, <em><strong>ReproNim</strong></em> is here to help after the course with your own ‘home’ computational platform.</p>
<div class="section" id="meet-your-reprohub">
<h2>Meet your ReproHub<a class="headerlink" href="#meet-your-reprohub" title="Permalink to this headline">¶</a></h2>
<p>The ReproHub is hosted at a URL that we will give you in class. Point your browser to this url. You will use your GitHub authorization in order to log in.
Once you are in the site, you will see the ‘Launcher’ from where you can ‘launch’ many ships. For now, we’ll want a command line “terminal”.
Click that icon to get started.</p>
<p>Amongst the first things we need to do on this platform is let <em>git</em> know about who you are. To do this:</p>
<p>Set your username: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">config</span> <span class="pre">--global</span> <span class="pre">user.name</span> <span class="pre">&quot;FirstName</span> <span class="pre">LastName&quot;</span></code></p>
<p>Set your email address: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">config</span> <span class="pre">--global</span> <span class="pre">user.email</span> <span class="pre">&quot;YourUserName&#64;example.com&quot;</span></code></p>
</div>
</div>
<div class="section" id="the-steps">
<h1>The Steps<a class="headerlink" href="#the-steps" title="Permalink to this headline">¶</a></h1>
<p>We will do our re-executable publication in a sequence of steps that are designed to accomplish all the necessary tasks in the timeframe allocated by our
course.</p>
<div class="section" id="create-a-github-repo-for-your-publication">
<h2>Create a GitHub Repo for your Publication<a class="headerlink" href="#create-a-github-repo-for-your-publication" title="Permalink to this headline">¶</a></h2>
<p><em><strong>Note</strong></em> We’re not going to do this today, but in the event of a ‘real’ paper we would do the following.</p>
<p>Our final publication should include a GitHub repository, where we can connect all the parts of our publication in a central,
shared location. A GitHub repo is FAIR: Findable, Accessible, Interoperable and Reusable. Since this will be ‘self published’ and not peer-reviewed,
we really should think of this as a pre-print of our ‘publication’. Were this an actual publication, we would create a more formal document, complying
with the norms of traditional scientific publication, and submit to a peer-reviewed journal (after depositing the preprint as well).</p>
</div>
<div class="section" id="pre-registration">
<h2>Pre-Registration<a class="headerlink" href="#pre-registration" title="Permalink to this headline">¶</a></h2>
<p>In this case, we do have a specific set of hypotheses we are testing. In general, we <em>should</em> pre-register this plan (or consider a <span class="xref myst">registered report</span>)
but those steps are considered to be outside the scope of what we can accomplish in our time together. We highly recommend you read more about this
topic <a class="reference external" href="https://help.osf.io/article/158-create-a-preregistration">here</a>.</p>
</div>
<div class="section" id="collect-data">
<h2>Collect Data<a class="headerlink" href="#collect-data" title="Permalink to this headline">¶</a></h2>
<p>In this case we will use pre-collected data. Specifically, each of you will be assigned a subset of the
<a class="reference external" href="https://openneuro.org/datasets/ds001907/versions/3.0.2">OpenNeuro ds001907</a> collection. The description of this study can be found at the
OpenNeuro website, and this data was published in the following <a class="reference external" href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC7217223/">data paper</a>. There are
46 subjects in this overall dataset (25 healthy aging, 21 Parkinson’s Disease).  There are many other potential sources of Parkinson’s disease data: <a class="reference external" href="https://www.nitrc.org/xnat/index.php">NITRC-IR</a>, <a class="reference external" href="https://www.nitrc.org/projects/ppmi">Parkinson’s Progression Markers Initiative</a>, <a class="reference external" href="https://www.nitrc.org/projects/openneuro">OpenNeuro</a>, etc.</p>
<div class="section" id="data-subset">
<h3>Data Subset<a class="headerlink" href="#data-subset" title="Permalink to this headline">¶</a></h3>
<p>Each student (or student group) will be assigned a subset of the above dataset for their analysis. This is both for practical purposes, as there is
time to do only a limited amount of data analysis in this course, but also for didactic purposes, so that we can share (and aggregate) our individual
results in support of both a <em>meta analysis</em> amongst our various subsets and a <em>mega analysis</em> by combining all of our individual results together.
For our purposes here, each student/team will get 5 randomly assigned typically developing subjects and 5 subjects with Parkinson’s Disease (PD). We know,
‘your study’ will be under-powered, but, frankly, it’s still underpowered even if you have 100’s of subjects, we’ll talk about <em>that</em> separately.</p>
<div class="section" id="let-s-do-it">
<h4>Let’s Do It!<a class="headerlink" href="#let-s-do-it" title="Permalink to this headline">¶</a></h4>
<p>On the JupyterHub in your home directory (i.e. the prompt in your terminal window will look something like <code class="docutils literal notranslate"><span class="pre">jovyan&#64;jupyter-YourGithubUsername:~$</span></code>, let’s make a directory for your data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span>
<span class="n">mkdir</span> <span class="n">my_data</span>
<span class="n">cd</span> <span class="n">my_data</span>
</pre></div>
</div>
<p>Now we are going to ‘fork’ (make a copy) of our specially prepared reduced version of the ds001907 dataset. To do this, we will</p>
<ol class="simple">
<li><p>In your browser open up a new tab to the dataset’s repo: <a class="reference external" href="https://github.com/ReproNim/ds001907-EDU">https://github.com/ReproNim/ds001907-EDU</a></p></li>
<li><p>‘Fork’ this dataset to your own GitHub account.</p></li>
</ol>
<p><img alt="picture" src="_images/GitHub_fork.png" /></p>
<p>Now, on the JupyterHub in your my_data directory, let’s clone your fork of this dataset, please replace “YOUR-GITHUB-LOGIN” with your GitHub username:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">my_data</span>
<span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/&lt;</span><span class="n">YOUR</span><span class="o">-</span><span class="n">GITHUB</span><span class="o">-</span><span class="n">LOGIN</span><span class="o">&gt;/</span><span class="n">ds001907</span><span class="o">-</span><span class="n">EDU</span><span class="o">.</span><span class="n">git</span> <span class="n">my_ds001907</span><span class="o">-</span><span class="n">EDU</span>
</pre></div>
</div>
<p>You now have the ‘complete’ dataset in the my_ds001907-EDU directory.</p>
<p>Now, you can teach git to remember you, to save typing later on:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">my_ds001907</span><span class="o">-</span><span class="n">EDU</span>
<span class="n">git</span> <span class="n">config</span> <span class="n">credential</span><span class="o">.</span><span class="n">helper</span> <span class="s1">&#39;cache --timeout=3600&#39;</span>
</pre></div>
</div>
<p>Let’s create your own specific working subset from this master dataset. You (or your working group) will receive a “Group_Number” (i.e. Group_10) which assigns you a set of 10 cases for your working at the class. We then need to:</p>
<ol class="simple">
<li><p>Remove the sub-* directories from the master data set (that you forked and cloned to your home directory) that are <strong>not</strong> in your assinged dataset</p></li>
<li><p>Remove the lines of the <em>participants.tsv</em> file that are not for your subjects (your assigned 10 cases)</p></li>
</ol>
<p>You can see the cases that are in your group with the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">more</span> <span class="o">~/</span><span class="n">Exercise</span><span class="o">-</span><span class="n">OHBM2022</span><span class="o">/</span><span class="n">Exercise</span><span class="o">/</span><span class="n">Groups</span><span class="o">/</span><span class="n">Group_10</span>
</pre></div>
</div>
<p>which should generate output like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Group</span> <span class="mi">10</span>
<span class="n">sub</span><span class="o">-</span><span class="n">RC4101</span>
<span class="n">sub</span><span class="o">-</span><span class="n">RC4128</span>
<span class="n">sub</span><span class="o">-</span><span class="n">RC4129</span>
<span class="n">sub</span><span class="o">-</span><span class="n">RC4130</span>
<span class="n">sub</span><span class="o">-</span><span class="n">RC4131</span>
<span class="n">sub</span><span class="o">-</span><span class="n">RC4206</span>
<span class="n">sub</span><span class="o">-</span><span class="n">RC4207</span>
<span class="n">sub</span><span class="o">-</span><span class="n">RC4208</span>
<span class="n">sub</span><span class="o">-</span><span class="n">RC4210</span>
<span class="n">sub</span><span class="o">-</span><span class="n">RC4211</span>
</pre></div>
</div>
<p>We have a simple ‘helper script’ that will create this subset of directories for you.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">~/</span><span class="n">Exercise</span><span class="o">-</span><span class="n">OHBM2022</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">data_subset</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">g</span> <span class="o">&lt;</span><span class="n">YourGroupNumber</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Next, Let’s confirm that your working subset is still have a happy BIDS dataset. The dataset you cloned (which is actually a DataLad dataset, which we will discuss later) so let’s clean up the DataLad aspect
of this new data subset and run the BIDS validator (locally as a Singularity container application, in a way that deals with a DataLad dataset):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datalad</span> <span class="n">save</span> <span class="o">-</span><span class="n">m</span> <span class="s2">&quot;My new dataset&quot;</span> <span class="o">.</span>
</pre></div>
</div>
<p>And then actually run the validator (using singularity):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>cd ~/my_data
singularity exec --bind $PWD/my_ds001907-EDU:/data /shared/sing/bids_validator.simg bids-validator /data --ignoreSymlinks --ignoreNiftiHeaders
</pre></div>
</div>
<p>This dataset will (hopefully) pass, and if it does, that outcome will be reported to you (“This dataset appears to be BIDS compatible.”) by the validator. You can ignore the warnings about
“…Tabular file contains custom columns…” for now.</p>
<p>Great, you now have a valid BIDS (and DataLad) dataset.</p>
<p>Now you can now “publish” this dataset by pushing it back to your GitHub repo:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">my_data</span><span class="o">/</span><span class="n">my_ds001907</span><span class="o">-</span><span class="n">EDU</span>
<span class="n">git</span> <span class="n">push</span>
</pre></div>
</div>
<p><em><strong>Note:</strong></em> Git may or may not ask you for your username and password, but by password, it rally means the <em><strong>token</strong></em> that you saved earlier, depending on how you have your git account setup. Make sure you have your token…</p>
<p>Congratulations! You have now published your dataset by putting it in a github repo, where it is now both findable and citable.</p>
<p>Now that we have our dataset, and have it ‘published’, we can prepare to use this dataset in our analysis. We will do this in two main steps: 1) setting up our analysis environment, and 2) running the analysis.</p>
</div>
</div>
</div>
<div class="section" id="setting-the-analysis-environment-commands">
<h2>Setting the Analysis Environment Commands<a class="headerlink" href="#setting-the-analysis-environment-commands" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span>
<span class="n">datalad</span> <span class="n">create</span> <span class="o">-</span><span class="n">c</span> <span class="n">text2git</span> <span class="n">my_analysis</span>
<span class="n">cd</span> <span class="n">my_analysis</span>
</pre></div>
</div>
<p>Install all desired “components”</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datalad</span> <span class="n">install</span> <span class="o">-</span><span class="n">d</span> <span class="o">.</span> <span class="o">-</span><span class="n">s</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/&lt;</span><span class="n">YOUR</span><span class="o">-</span><span class="n">GITHUB</span><span class="o">-</span><span class="n">LOGIN</span><span class="o">&gt;/</span><span class="n">ds001907</span><span class="o">-</span><span class="n">EDU</span><span class="o">.</span><span class="n">git</span> <span class="n">rawdata</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datalad</span> <span class="n">install</span> <span class="o">-</span><span class="n">d</span> <span class="o">.</span> <span class="o">-</span><span class="n">s</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">ReproNim</span><span class="o">/</span><span class="n">containers</span> <span class="n">containers</span>
<span class="n">mkdir</span> <span class="n">code</span>
<span class="n">datalad</span> <span class="n">install</span> <span class="o">-</span><span class="n">d</span> <span class="o">.</span> <span class="o">-</span><span class="n">s</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">proj</span><span class="o">-</span><span class="n">nuisance</span><span class="o">/</span><span class="n">simple_workflow</span> <span class="n">code</span><span class="o">/</span><span class="n">simple_workflow</span>
</pre></div>
</div>
<p>Make some working space and tell git to ignore the working space</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="n">workdir</span>
<span class="n">echo</span> <span class="n">workdir</span> <span class="o">&gt;</span> <span class="o">.</span><span class="n">gitignore</span>
<span class="n">datalad</span> <span class="n">save</span> <span class="o">-</span><span class="n">m</span> <span class="s2">&quot;ignore workdir&quot;</span> <span class="o">.</span><span class="n">gitignore</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="data-analysis">
<h1>Data Analysis<a class="headerlink" href="#data-analysis" title="Permalink to this headline">¶</a></h1>
<p>We need to execute an analysis that supports the hypotheses we are considering.</p>
<div class="section" id="the-hypotheses">
<h2>The Hypotheses<a class="headerlink" href="#the-hypotheses" title="Permalink to this headline">¶</a></h2>
<p>Our hypotheses are drawn from the findings of the <a class="reference external" href="https://enigma.ini.usc.edu/">ENIGMA Consortium</a>. Specifically, the
<a class="reference external" href="https://enigma.ini.usc.edu/ongoing/enigma-parkinsons/">ENIGMA Parkinson’s Disease subgroup</a> have identified a number of salient structural findings,
reported in <a class="reference external" href="https://pubmed.ncbi.nlm.nih.gov/34288137/">this paper</a>. From these findings, we have selected the following <em>a priori</em> hypotheses:</p>
<ol class="simple">
<li><p>ICV is slightly larger in PD patients</p></li>
<li><p>larger thalamic volumes (esp in earlier stage PD)</p></li>
<li><p>smaller putamen volumes</p></li>
</ol>
<p>We can assess these questions using software that will perform a volumetric analysis of the T1 structural imaging. For an efficient volumetric
analysis, we have selected the <span class="xref myst">FSL software</span>, using the <span class="xref myst">Brain Extraction Tool</span> we can determine total brain volume, using <span class="xref myst">FAST</span>, we can
get tissue (gray, white, CSF) volumes, and <span class="xref myst">FIRST</span> yields subcortical structural volumes. The run time for each subject should be approximately
10 minutes.</p>
</div>
<div class="section" id="the-container">
<h2>The Container<a class="headerlink" href="#the-container" title="Permalink to this headline">¶</a></h2>
<p>It turns out we already have a container that runs the set of FSL tools we need (coloquially know of as the ‘simple1’ container), it was used in
the paper <a class="reference external" href="https://f1000research.com/articles/6-124">Ghosh, et al, “A very simple, re-executable neuroimaging publication”</a>, and is accessible
already through the DataLad and ReproNim/Containers infrastructure.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datalad</span> <span class="n">containers</span><span class="o">-</span><span class="n">run</span> \
  <span class="o">-</span><span class="n">n</span> <span class="n">containers</span><span class="o">/</span><span class="n">repronim</span><span class="o">-</span><span class="n">simple</span><span class="o">-</span><span class="n">workflow</span> \
  <span class="o">--</span><span class="nb">input</span> <span class="s1">&#39;rawdata/sub-RC4*/ses-1/anat/sub-*_ses-1_T1w.nii.gz&#39;</span> \
  <span class="n">code</span><span class="o">/</span><span class="n">simple_workflow</span><span class="o">/</span><span class="n">run_demo_workflow</span><span class="o">.</span><span class="n">py</span> \
    <span class="o">-</span><span class="n">o</span> <span class="o">.</span> <span class="o">-</span><span class="n">w</span> <span class="n">data</span><span class="o">/</span><span class="n">workdir</span> <span class="o">--</span><span class="n">plugin_args</span> <span class="s1">&#39;dict(n_procs=10)&#39;</span> <span class="s1">&#39;</span><span class="si">{inputs}</span><span class="s1">&#39;</span>
</pre></div>
</div>
<p><em><strong>Congratulations! You have now run a completly re-executable analysis to venerate volumetric results on your anatomic data!</strong></em>
Now, let’s do someting with these results.</p>
<p>First, let’s get all of our <em>stuff</em> represented in a more completly standard representation.</p>
</div>
</div>
<div class="section" id="standards">
<h1>Standards<a class="headerlink" href="#standards" title="Permalink to this headline">¶</a></h1>
<div class="section" id="imaging-data">
<h2>Imaging Data<a class="headerlink" href="#imaging-data" title="Permalink to this headline">¶</a></h2>
<p>Our raw imaging data is in pretty good shape. It is in BIDS already (although we did have a warning about not having a participants.json ‘dictionary).
An issue with BIDS, however, is that even compliant BIDS are not completely ‘self described’. The “diagnosis” field, for example, could have been
called anything (dx, DIAG, condition, etc.), and therefore ‘someone’ would still need to tell you what this field actually is, if they handed you
this file. <a class="reference external" href="http://nidm.nidash.org/">NIDM</a> was developed to provide a standardised way to represent what our various data fields ‘mean’. For ‘diagnosis’, to continue the
example, I could associate that field with a reference to a definition of what we mean for this field, like this <span class="xref myst">link</span>. So, our next step is
to represent our imaging data in the NIDM representation.</p>
<p>In the my_analysis directory…</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>bidsmri2nidm -d $PWD/rawdata -o $PWD/rawdata/my_nidm.ttl
</pre></div>
</div>
<p>You will need to answer a number of questions about your data. Details of an example session are shown <span class="xref myst">here</span>.
You may get some ‘warnings’ don’t worry about these (including regarding a missing INTERLEX API key). This process generates, in your
rawdata BIDS directory a ‘participants.json’ file and the ‘my_nidm.ttl’ file.</p>
</div>
<div class="section" id="standardized-representation-of-the-results">
<h2>Standardized Representation of the Results<a class="headerlink" href="#standardized-representation-of-the-results" title="Permalink to this headline">¶</a></h2>
<p>The volumetric results for each structure measured are
packaged in a .json representation. This .json can be transferred into the NIDM semantically encoded results (.ttl).
First, lets generate a listing of your cases:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ls</span> <span class="o">-</span><span class="n">d1</span> <span class="n">rawdata</span><span class="o">/</span><span class="n">sub</span><span class="o">-*</span> <span class="o">|</span> <span class="n">xargs</span> <span class="o">-</span><span class="n">n</span> <span class="mi">1</span> <span class="n">basename</span> <span class="o">&gt;</span> <span class="n">cases</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>cases.txt now lists your cases. Next, looping over all of your cases, let’s convert the .json into NIDM and merge it into your main NIDM representation:</p>
<p><em><strong>At the moment (6/9/22) this will fail, since we don’t have fslsegstats2nidm installed globally. IF you are checking this, you can install it
for yourself by <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">https://github.com/ReproNim/fsl_seg_to_nidm/archive/refs/heads/master.zip</span></code></strong></em></p>
<p><em><strong>BASH</strong></em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>for i in `cat cases.txt`; 
do   
    echo &quot;Working on $i file...&quot;; 
    fslsegstats2nidm -f $PWD/${i}_ses-1_T1w/segstats.json -subjid $i -o $PWD/file.ttl -n $PWD/rawdata/my_nidm.ttl;
done
</pre></div>
</div>
<p>This should generate the following output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sub</span><span class="o">-</span><span class="n">RC4101</span>
<span class="n">Found</span> <span class="n">subject</span> <span class="n">ID</span><span class="p">:</span> <span class="n">sub</span><span class="o">-</span><span class="n">RC4101</span> <span class="ow">in</span> <span class="n">NIDM</span> <span class="n">file</span> <span class="p">(</span><span class="n">agent</span><span class="p">:</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">iri</span><span class="o">.</span><span class="n">nidash</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">c485338e</span><span class="o">-</span><span class="n">d9d7</span><span class="o">-</span><span class="mi">11</span><span class="n">ec</span><span class="o">-</span><span class="mi">8</span><span class="n">cef</span><span class="o">-</span><span class="n">acde48001122</span><span class="p">)</span>
<span class="n">Writing</span> <span class="n">Augmented</span> <span class="n">NIDM</span> <span class="n">file</span><span class="o">...</span>
<span class="n">sub</span><span class="o">-</span><span class="n">RC4227</span>
<span class="n">Found</span> <span class="n">subject</span> <span class="n">ID</span><span class="p">:</span> <span class="n">sub</span><span class="o">-</span><span class="n">RC4227</span> <span class="ow">in</span> <span class="n">NIDM</span> <span class="n">file</span> <span class="p">(</span><span class="n">agent</span><span class="p">:</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">iri</span><span class="o">.</span><span class="n">nidash</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">d4a9e7ce</span><span class="o">-</span><span class="n">d9d7</span><span class="o">-</span><span class="mi">11</span><span class="n">ec</span><span class="o">-</span><span class="mi">8</span><span class="n">cef</span><span class="o">-</span><span class="n">acde48001122</span><span class="p">)</span>
<span class="n">Writing</span> <span class="n">Augmented</span> <span class="n">NIDM</span> <span class="n">file</span><span class="o">...</span>
</pre></div>
</div>
<p>and your volumes should now be included in you my_nidm.ttl file!</p>
<p>Let’s make DataLad happy with the results we have just updated…</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datalad</span> <span class="n">save</span> <span class="o">-</span><span class="n">m</span> <span class="s2">&quot;added imaging and volume metadata&quot;</span> <span class="o">-</span><span class="n">r</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="querying-the-results">
<h1>Querying the results<a class="headerlink" href="#querying-the-results" title="Permalink to this headline">¶</a></h1>
<p>Now, what can we do with our results? We can interogate the my_nidm.ttl file for the contents that is has. For example, what subjects are in this data file?</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pynidm</span> <span class="n">query</span> <span class="o">-</span><span class="n">nl</span> <span class="n">rawdata</span><span class="o">/</span><span class="n">my_nidm</span><span class="o">.</span><span class="n">ttl</span> <span class="o">-</span><span class="n">u</span> <span class="o">/</span><span class="n">subjects</span>
</pre></div>
</div>
<p>What do we know about a particular subject?</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pynidm</span> <span class="n">query</span> <span class="o">-</span><span class="n">nl</span> <span class="n">rawdata</span><span class="o">/</span><span class="n">my_nidm</span><span class="o">.</span><span class="n">ttl</span> <span class="o">-</span><span class="n">u</span> <span class="o">/</span><span class="n">subjects</span><span class="o">/&lt;</span><span class="n">A</span> <span class="n">subject</span> <span class="kn">from</span> <span class="nn">your</span> <span class="n">cohort</span><span class="o">&gt;</span> 
</pre></div>
</div>
<p>(for example sub-RC4101).</p>
<p>Extract specific fields, where fsl_000030 is the code for “Right-Thalamus-Proper (mm^3)”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pynidm</span> <span class="n">query</span> <span class="o">-</span><span class="n">nl</span> <span class="n">rawdata</span><span class="o">/</span><span class="n">my_nidm</span><span class="o">.</span><span class="n">ttl</span> <span class="o">--</span><span class="n">get_fields</span> <span class="n">age</span><span class="p">,</span><span class="n">fsl_000030</span><span class="p">,</span><span class="n">sex</span>
</pre></div>
</div>
<p>Codes for various structural volumes:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:center head"><p>Structure</p></th>
<th class="text-align:center head"><p>Code</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:center"><p>Left-Accumbens-area (mm^3)</p></td>
<td class="text-align:center"><p>fsl_000004</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>Left-Amygdala (mm^3)</p></td>
<td class="text-align:center"><p>fsl_000006</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>Left-Caudate (mm^3)</p></td>
<td class="text-align:center"><p>fsl_000008</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>Left-Hippocampus (mm^3)</p></td>
<td class="text-align:center"><p>fsl_000010</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>Left-Pallidum (mm^3)</p></td>
<td class="text-align:center"><p>fsl_000012</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>Left-Putamen (mm^3)</p></td>
<td class="text-align:center"><p>fsl_000014</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>Left-Thalamus-Proper (mm^3)</p></td>
<td class="text-align:center"><p>fsl_000016</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>Right-Accumbens-area (mm^3)</p></td>
<td class="text-align:center"><p>fsl_000018</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>Right-Amygdala (mm^3)</p></td>
<td class="text-align:center"><p>fsl_000020</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>Right-Caudate (mm^3)</p></td>
<td class="text-align:center"><p>fsl_000022</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>Right-Hippocampus (mm^3)</p></td>
<td class="text-align:center"><p>fsl_000024</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>Right-Pallidum (mm^3)</p></td>
<td class="text-align:center"><p>fsl_000026</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>Right-Putamen (mm^3)</p></td>
<td class="text-align:center"><p>fsl_000028</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>Right-Thalamus-Proper (mm^3)</p></td>
<td class="text-align:center"><p>fsl_000030</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>csf (mm^3)</p></td>
<td class="text-align:center"><p>fsl_000032</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>gray (mm^3)</p></td>
<td class="text-align:center"><p>fsl_000034</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>white (mm^3)</p></td>
<td class="text-align:center"><p>fsl_000036</p></td>
</tr>
</tbody>
</table>
<div class="section" id="linear-regression">
<h2>Linear Regression<a class="headerlink" href="#linear-regression" title="Permalink to this headline">¶</a></h2>
<p>Within the my_nidm.ttl we can also perform simple statistical analyses. Returning to our hypotheses, our nidm file knows about age, sex, diagnosis, and the regional brain volumes.
For our anatomic regions, we do need to recall the codes that are assigned: brain volume (TODO), thalamus (fsl_000016,fsl_000030), putamen (fsl_000014, fsl_000028), for left and right, respectively.
So, for any of these, we can use <em>pynidm</em> to run a linear regression for a specific model. For example, for Right Thalamus, a cpmprehensive
model that includes tems for age, sex, and an age by sex interaction to predict diagnosis would look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pynidm</span> <span class="n">linear</span><span class="o">-</span><span class="n">regression</span> <span class="o">-</span><span class="n">nl</span> <span class="n">rawdata</span><span class="o">/</span><span class="n">my_nidm</span><span class="o">.</span><span class="n">ttl</span> <span class="o">-</span><span class="n">model</span> <span class="s2">&quot;fsl_000030 = age*sex+sex+age+diagnosis&quot;</span> <span class="o">-</span><span class="n">contrast</span> <span class="s2">&quot;diagnosis&quot;</span>
</pre></div>
</div>
<p>A simpler model that just looks at Right Thalamus predicting diagnosis would be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pynidm</span> <span class="n">linear</span><span class="o">-</span><span class="n">regression</span> <span class="o">-</span><span class="n">nl</span> <span class="n">rawdata</span><span class="o">/</span><span class="n">my_nidm</span><span class="o">.</span><span class="n">ttl</span> <span class="o">-</span><span class="n">model</span> <span class="s2">&quot;fsl_000030 = diagnosis&quot;</span> <span class="o">-</span><span class="n">contrast</span> <span class="s2">&quot;diagnosis&quot;</span>
</pre></div>
</div>
<details>
  <summary>Click to expand!</summary>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>***********************************************************************************************************
Your command was: pynidm linear-regression -nl rawdata/my_nidm.ttl -model &quot;fsl_000030 = age*sex+sex+age+diagnosis&quot; -contrast &quot;diagnosis&quot; 

Your data set has less than 20 points, which means the model calculated may not be accurate due to a lack of data. 
This means you cannot regularize the data either.
Continue anyways? Y or N: Y
      age  fsl_000030  diagnosis  sex
0  66.28288      9069.0          0    0
1  69.04774      8142.0          1    0

***********************************************************************************************************

Model Results: 
fsl_000030 ~ diagnosis + age + sex + age*sex

***********************************************************************************************************



Treatment (Dummy) Coding: Dummy coding compares each level of the categorical variable to a base reference level. The base reference level is the value of the intercept.
With contrast (treatment coding)
                          OLS Regression Results                            
==============================================================================
Dep. Variable:             fsl_000030   R-squared:                       1.000
Model:                            OLS   Adj. R-squared:                    nan
Method:                 Least Squares   F-statistic:                       nan
Date:                Mon, 23 May 2022   Prob (F-statistic):                nan
Time:                        08:04:01   Log-Likelihood:                 49.724
No. Observations:                   2   AIC:                            -95.45
Df Residuals:                       0   BIC:                            -98.06
Df Model:                           1                                         
Covariance Type:            nonrobust                                         
================================================================================================
                                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------------------------
Intercept                       56.4011        inf          0        nan         nan         nan
C(diagnosis, Treatment)[T.1] -1302.9428        inf         -0        nan         nan         nan
age                            135.9717        inf          0        nan         nan         nan
sex                                   0        nan        nan        nan         nan         nan
age:sex                               0        nan        nan        nan         nan         nan
==============================================================================
Omnibus:                          nan   Durbin-Watson:                   1.000
Prob(Omnibus):                    nan   Jarque-Bera (JB):                0.333
Skew:                           0.000   Prob(JB):                        0.846
Kurtosis:                       1.000   Cond. No.                         138.
==============================================================================

Notes:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
[2] The input rank is higher than the number of observations.


Simple Coding: Like Treatment Coding, Simple Coding compares each level to a fixed reference level. However, with simple coding, the intercept is the grand mean of all the levels of the factors.
                          OLS Regression Results                            
==============================================================================
Dep. Variable:             fsl_000030   R-squared:                       1.000
Model:                            OLS   Adj. R-squared:                    nan
Method:                 Least Squares   F-statistic:                       nan
Date:                Mon, 23 May 2022   Prob (F-statistic):                nan
Time:                        08:04:01   Log-Likelihood:                 50.534
No. Observations:                   2   AIC:                            -97.07
Df Residuals:                       0   BIC:                            -99.68
Df Model:                           1                                         
Covariance Type:            nonrobust                                         
================================================================================================
                                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------------------------
Intercept                       54.0233        inf          0        nan         nan         nan
C(diagnosis, Simple)[Simp.0] -1276.4203        inf         -0        nan         nan         nan
age                            126.3790        inf          0        nan         nan         nan
sex                                   0        nan        nan        nan         nan         nan
age:sex                               0        nan        nan        nan         nan         nan
==============================================================================
Omnibus:                          nan   Durbin-Watson:                   1.000
Prob(Omnibus):                    nan   Jarque-Bera (JB):                0.333
Skew:                           0.000   Prob(JB):                        0.846
Kurtosis:                       1.000   Cond. No.                         135.
==============================================================================

Notes:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
[2] The input rank is higher than the number of observations.


Sum (Deviation) Coding: Sum coding compares the mean of the dependent variable for a given level to the overall mean of the dependent variable over all the levels.
                          OLS Regression Results                            
==============================================================================
Dep. Variable:             fsl_000030   R-squared:                       1.000
Model:                            OLS   Adj. R-squared:                    nan
Method:                 Least Squares   F-statistic:                       nan
Date:                Mon, 23 May 2022   Prob (F-statistic):                nan
Time:                        08:04:01   Log-Likelihood:                 49.133
No. Observations:                   2   AIC:                            -94.27
Df Residuals:                       0   BIC:                            -96.88
Df Model:                           1                                         
Covariance Type:            nonrobust                                         
==========================================================================================
                           coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------------------
Intercept                 14.9315        inf          0        nan         nan         nan
C(diagnosis, Sum)[S.0]   639.0088        inf          0        nan         nan         nan
age                      126.9568        inf          0        nan         nan         nan
sex                             0        nan        nan        nan         nan         nan
age:sex                         0        nan        nan        nan         nan         nan
==============================================================================
Omnibus:                          nan   Durbin-Watson:                   0.138
Prob(Omnibus):                    nan   Jarque-Bera (JB):                0.333
Skew:                           0.000   Prob(JB):                        0.846
Kurtosis:                       1.000   Cond. No.                         67.7
==============================================================================

Notes:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
[2] The input rank is higher than the number of observations.


Backward Difference Coding: In backward difference coding, the mean of the dependent variable for a level is compared with the mean of the dependent variable for the prior level.
                          OLS Regression Results                            
==============================================================================
Dep. Variable:             fsl_000030   R-squared:                       1.000
Model:                            OLS   Adj. R-squared:                    nan
Method:                 Least Squares   F-statistic:                       nan
Date:                Mon, 23 May 2022   Prob (F-statistic):                nan
Time:                        08:04:01   Log-Likelihood:                 50.534
No. Observations:                   2   AIC:                            -97.07
Df Residuals:                       0   BIC:                            -99.68
Df Model:                           1                                         
Covariance Type:            nonrobust                                         
===========================================================================================
                            coef    std err          t      P&gt;|t|      [0.025      0.975]
-------------------------------------------------------------------------------------------
Intercept                  54.0233        inf          0        nan         nan         nan
C(diagnosis, Diff)[D.0] -1276.4203        inf         -0        nan         nan         nan
age                       126.3790        inf          0        nan         nan         nan
sex                              0        nan        nan        nan         nan         nan
age:sex                          0        nan        nan        nan         nan         nan
==============================================================================
Omnibus:                          nan   Durbin-Watson:                   1.000
Prob(Omnibus):                    nan   Jarque-Bera (JB):                0.333
Skew:                           0.000   Prob(JB):                        0.846
Kurtosis:                       1.000   Cond. No.                         135.
==============================================================================

Notes:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
[2] The input rank is higher than the number of observations.


Helmert Coding: Our version of Helmert coding is sometimes referred to as Reverse Helmert Coding. The mean of the dependent variable for a level is compared to the mean of the dependent variable over all previous levels. Hence, the name ‘reverse’ being sometimes applied to differentiate from forward Helmert coding.
                          OLS Regression Results                            
==============================================================================
Dep. Variable:             fsl_000030   R-squared:                       1.000
Model:                            OLS   Adj. R-squared:                    nan
Method:                 Least Squares   F-statistic:                       nan
Date:                Mon, 23 May 2022   Prob (F-statistic):                nan
Time:                        08:04:01   Log-Likelihood:                 49.133
No. Observations:                   2   AIC:                            -94.27
Df Residuals:                       0   BIC:                            -96.88
Df Model:                           1                                         
Covariance Type:            nonrobust                                         
==============================================================================================
                               coef    std err          t      P&gt;|t|      [0.025      0.975]
----------------------------------------------------------------------------------------------
Intercept                     14.9315        inf          0        nan         nan         nan
C(diagnosis, Helmert)[H.1]  -639.0088        inf         -0        nan         nan         nan
age                          126.9568        inf          0        nan         nan         nan
sex                                 0        nan        nan        nan         nan         nan
age:sex                             0        nan        nan        nan         nan         nan
==============================================================================
Omnibus:                          nan   Durbin-Watson:                   0.138
Prob(Omnibus):                    nan   Jarque-Bera (JB):                0.333
Skew:                           0.000   Prob(JB):                        0.846
Kurtosis:                       1.000   Cond. No.                         67.7
==============================================================================

Notes:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
[2] The input rank is higher than the number of observations.


</pre></div>
</div>
</details>
</div>
</div>
<div class="section" id="publishing-the-results-to-the-reprolake">
<h1>Publishing the results to the ReproLake<a class="headerlink" href="#publishing-the-results-to-the-reprolake" title="Permalink to this headline">¶</a></h1>
<p>The “ReproLake” is a public repository of metadata (imaging and results). We have implemented a ReproLake using a StarDog graph database. You can ‘publish’ your results to this accessible database with the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">--</span><span class="n">location</span> <span class="o">--</span><span class="n">request</span> <span class="n">POST</span> <span class="s1">&#39;https://stardog.scicrunch.io:5821/Repronim_OHBM_2022?graph=urn:http://repronim.org/&lt;YourInitials&gt;&#39;</span> <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: text/turtle&#39;</span> <span class="o">--</span><span class="n">user</span> <span class="n">repro</span><span class="o">-</span><span class="n">student</span><span class="p">:</span><span class="n">XXXX</span> <span class="o">--</span><span class="n">data</span><span class="o">-</span><span class="n">binary</span> <span class="s1">&#39;@/home/jovyan/my_analysis/rawdata/my_nidm.ttl&#39;</span>
</pre></div>
</div>
<p>where the XXXX password will be provided in class, and your own initials should be inserted where specified (this provides a unique identifier).</p>
<p>In addition to entering our data into the RdeproLake datbase, we can collect publically accessible NIDM files for use with other query engines. Specifically, let’s collect all the NIDM files created by this class. To do this, we will add our NIDM file to a folder in our educational course GitHub repo with the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">my_analysis</span>
<span class="n">cp</span> <span class="n">rawdata</span><span class="o">/</span><span class="n">my_nidm</span><span class="o">.</span><span class="n">ttl</span> <span class="o">~/</span><span class="n">Exercise</span><span class="o">-</span><span class="n">OHBM2022</span><span class="o">/</span><span class="n">Results</span><span class="o">/&lt;</span><span class="n">Your</span> <span class="n">Group</span> <span class="n">Number</span><span class="o">&gt;</span><span class="n">_nidm</span><span class="o">.</span><span class="n">ttl</span>
<span class="n">cd</span> <span class="o">~/</span><span class="n">Exercise</span><span class="o">-</span><span class="n">OHBM2022</span>
<span class="n">git</span> <span class="n">add</span> <span class="n">Results</span><span class="o">/&lt;</span><span class="n">Your</span> <span class="n">Group</span> <span class="n">Number</span><span class="o">&gt;</span><span class="n">_nidm</span><span class="o">.</span><span class="n">ttl</span>
<span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s2">&quot;Added &lt;Your Group Number&gt; NIDM file&quot;</span>
<span class="n">git</span> <span class="n">remote</span> <span class="n">add</span> <span class="n">OHBM</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/&lt;</span><span class="n">Your</span> <span class="n">github</span> <span class="n">username</span><span class="o">&gt;/</span><span class="n">OHBMEducation</span><span class="o">-</span><span class="mf">2022.</span><span class="n">git</span>
<span class="n">git</span> <span class="n">push</span> <span class="n">OHBM</span>
</pre></div>
</div>
<p>Now, on YOUR fork of the OHBMEducational-2022 repository, you can issue a ‘pull request’ to contribute these results back to the main educational course repository.</p>
<p><img alt="picture" src="_images/pull_request.png" /></p>
</div>
<div class="section" id="publish-the-complete-package">
<h1>Publish the Complete Package<a class="headerlink" href="#publish-the-complete-package" title="Permalink to this headline">¶</a></h1>
<p>There are numerous places you can now share this complete dataset. GitHub does not ‘like’ large binary datasets, all the imaging data we have
been using so far actually, through the magic of ‘git-annex’ actually resides at the AWS S3 data hosting of OpenNeuro. In our processing, we
have generated new data that does not have an alternate location. So, when we publish this complete data, we need to allow for the storage of
this newly generated imaging data. For this exmple, we will use Git LFS, whereby a GitHub subscription allows up to 1GB of free storage and up
to 1GB of bandwidth monthly. The following steps are summarized from the <a class="reference external" href="http://handbook.datalad.org/en/latest/basics/101-139-gitlfs.html">DataLad Handbook here</a>.</p>
<p>In order to store annexed dataset contents on GitHub, we need first to create a so-called “sibling” of our DataLad dataset:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datalad</span> <span class="n">create</span><span class="o">-</span><span class="n">sibling</span><span class="o">-</span><span class="n">github</span> <span class="n">my_experiment</span>
</pre></div>
</div>
<p>Remind git to remember you for this repository, to save lots of authenticating later on:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">config</span> <span class="n">credential</span><span class="o">.</span><span class="n">helper</span> <span class="s1">&#39;cache --timeout=3600&#39;</span>
</pre></div>
</div>
<p>To avoid a possible shortcoming in DataLad GitHub interaction, we do the following first:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datalad</span> <span class="n">push</span> <span class="o">--</span><span class="n">to</span><span class="o">=</span><span class="n">github</span>
</pre></div>
</div>
<p>And then we initialize a special remote of type <code class="docutils literal notranslate"><span class="pre">git-lfs</span></code>, pointing to the same GitHub repository:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>git annex initremote github-lfs type=git-lfs url=https://github.com/$Your_GitHub_Username/my_experiment encryption=none embedcreds=no autoenable=true
</pre></div>
</div>
<p>By running <code class="docutils literal notranslate"><span class="pre">datalad</span> <span class="pre">siblings</span></code> from the dataset directory, it will be evident that we now have two siblings of the original DataLad dataset, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>datalad siblings
.: here(+) [git]
.: github(-) [https://github.com/$Your_GitHub_Username/my_experiment.git (git)]
.: github-lfs(+) [git]
</pre></div>
</div>
<p>In order to link the annexed contents in the LFS special remote to the GitHub sibling such that we can update both simultaneously, we need to configure a publication dependency using the <code class="docutils literal notranslate"><span class="pre">publish-depends</span> <span class="pre">&lt;sibling&gt;</span></code> option. We’ll set it such that the <code class="docutils literal notranslate"><span class="pre">github</span></code> sibling depends on the <code class="docutils literal notranslate"><span class="pre">github-lfs</span></code> sibling.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datalad</span> <span class="n">siblings</span> <span class="n">configure</span> <span class="o">-</span><span class="n">s</span> <span class="n">github</span> <span class="o">--</span><span class="n">publish</span><span class="o">-</span><span class="n">depends</span> <span class="n">github</span><span class="o">-</span><span class="n">lfs</span>
</pre></div>
</div>
<p>Finally, with this single step it becomes possible to transfer the entire dataset, including annexed file content, to the same GitHub repository:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datalad</span> <span class="n">push</span> <span class="o">--</span><span class="n">to</span><span class="o">=</span><span class="n">github</span>
</pre></div>
</div>
<p>Others can now fork or clone this repository, see your complete process, and re-run the analysis to exactely replicate your results,
and, importantly, extend the exact same analysis to other data.</p>
</div>
<div class="section" id="write-your-paper">
<h1>Write Your Paper<a class="headerlink" href="#write-your-paper" title="Permalink to this headline">¶</a></h1>
<p>In your GitHub repo, create a document that describes your re-executable publication. Make sure to indicate the raw data that you used,
the analysis workflow and processing script you used, the complete results, and the statistical analysis. Indicate how someoneelse can
rerun your analysis.</p>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="materials.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Course materials</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="CoC.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Code of Conduct</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By ReproNim<br/>
    
        &copy; Copyright 2022.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>